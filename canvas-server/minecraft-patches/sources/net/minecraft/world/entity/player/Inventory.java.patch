--- a/net/minecraft/world/entity/player/Inventory.java
+++ b/net/minecraft/world/entity/player/Inventory.java
@@ -456,13 +_,15 @@
             }
         }
 
-        for (EquipmentSlot equipmentSlot : EQUIPMENT_SLOT_MAPPING.values()) {
+        // Canvas start - remove streams
+        for (EquipmentSlot equipmentSlot : EQUIPMENT_SLOTS_SORTED_BY_INDEX) {
             ItemStack itemStack = this.equipment.get(equipmentSlot);
             if (itemStack == stack) {
                 this.equipment.set(equipmentSlot, ItemStack.EMPTY);
                 return;
             }
         }
+        // Canvas end
     }
 
     @Override
@@ -515,17 +_,20 @@
 
     @Override
     public boolean isEmpty() {
-        for (ItemStack itemStack : this.items) {
+        // Canvas start - remove streams
+        for (int i = 0; i < this.items.size(); i++) {
+            ItemStack itemStack = this.items.get(i);
             if (!itemStack.isEmpty()) {
                 return false;
             }
         }
 
-        for (EquipmentSlot equipmentSlot : EQUIPMENT_SLOT_MAPPING.values()) {
+        for (EquipmentSlot equipmentSlot : EQUIPMENT_SLOTS_SORTED_BY_INDEX) {
             if (!this.equipment.get(equipmentSlot).isEmpty()) {
                 return false;
             }
         }
+        // Canvas end
 
         return true;
     }
@@ -572,31 +_,58 @@
     }
 
     public boolean contains(ItemStack stack) {
-        for (ItemStack itemStack : this) {
-            if (!itemStack.isEmpty() && ItemStack.isSameItemSameComponents(itemStack, stack)) {
-                return true;
-            }
-        }
+        // Canvas start - remove streams
+        for (int i = 0; i < this.items.size(); i++) {
+            ItemStack itemStack = this.items.get(i);
+            if (!itemStack.isEmpty() && ItemStack.isSameItemSameComponents(itemStack, stack)) {
+                return true;
+            }
+        }
+        for (EquipmentSlot equipmentSlot : EQUIPMENT_SLOTS_SORTED_BY_INDEX) {
+            ItemStack itemStack = this.equipment.get(equipmentSlot);
+            if (!itemStack.isEmpty() && ItemStack.isSameItemSameComponents(itemStack, stack)) {
+                return true;
+            }
+        }
+        // Canvas end
 
         return false;
     }
 
     public boolean contains(TagKey<Item> tag) {
-        for (ItemStack itemStack : this) {
-            if (!itemStack.isEmpty() && itemStack.is(tag)) {
-                return true;
-            }
-        }
+        // Canvas start - remove streams
+        for (int i = 0; i < this.items.size(); i++) {
+            ItemStack itemStack = this.items.get(i);
+            if (!itemStack.isEmpty() && itemStack.is(tag)) {
+                return true;
+            }
+        }
+        for (EquipmentSlot equipmentSlot : EQUIPMENT_SLOTS_SORTED_BY_INDEX) {
+            ItemStack itemStack = this.equipment.get(equipmentSlot);
+            if (!itemStack.isEmpty() && itemStack.is(tag)) {
+                return true;
+            }
+        }
+        // Canvas end
 
         return false;
     }
 
     public boolean contains(Predicate<ItemStack> predicate) {
-        for (ItemStack itemStack : this) {
-            if (predicate.test(itemStack)) {
-                return true;
-            }
-        }
+        // Canvas start - remove streams
+        for (int i = 0; i < this.items.size(); i++) {
+            ItemStack itemStack = this.items.get(i);
+            if (predicate.test(itemStack)) {
+                return true;
+            }
+        }
+        for (EquipmentSlot equipmentSlot : EQUIPMENT_SLOTS_SORTED_BY_INDEX) {
+            ItemStack itemStack = this.equipment.get(equipmentSlot);
+            if (predicate.test(itemStack)) {
+                return true;
+            }
+        }
+        // Canvas end
 
         return false;
     }
@@ -616,9 +_,12 @@
     }
 
     public void fillStackedContents(StackedItemContents contents) {
-        for (ItemStack itemStack : this.items) {
+        // Canvas start - remove streams
+        for (int i = 0; i < this.items.size(); i++) {
+            ItemStack itemStack = this.items.get(i);
             contents.accountSimpleStack(itemStack);
         }
+        // Canvas end
     }
 
     public ItemStack removeFromSelected(boolean removeStack) {
