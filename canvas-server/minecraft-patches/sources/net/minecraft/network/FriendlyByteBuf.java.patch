--- a/net/minecraft/network/FriendlyByteBuf.java
+++ b/net/minecraft/network/FriendlyByteBuf.java
@@ -366,6 +_,50 @@
         }
     }
 
+    // Canvas start - bulk writes to writeLongArray during chunk loading
+    public static void writeLongArray(FriendlyByteBuf buffer, long[] array) {
+        VarInt.write(buffer, array.length);
+        writeFixedSizeLongArray(buffer, array);
+    }
+
+    public static void writeFixedSizeLongArray(FriendlyByteBuf buffer, long[] array) {
+        if (array.length == 0) {
+            return;
+        }
+        int neededBytes = array.length * Long.BYTES;
+        int maxWritableBytes = buffer.source.maxWritableBytes();
+
+        if (maxWritableBytes >= neededBytes) {
+            buffer.source.ensureWritable(neededBytes);
+            int writerIndex = buffer.source.writerIndex();
+
+            if (buffer.source.hasArray()) {
+                byte[] dest = buffer.source.array();
+                int offset = buffer.source.arrayOffset() + writerIndex;
+
+                ByteBuffer buf = ByteBuffer.wrap(dest, offset, neededBytes).order(buffer.source.order());
+                buf.asLongBuffer().put(array);
+                buffer.source.writerIndex(writerIndex + neededBytes);
+            } else if (buffer.source.nioBufferCount() > 0) {
+                ByteBuffer nioBuf = buffer.source.nioBuffer(writerIndex, neededBytes);
+                nioBuf.asLongBuffer().put(array);
+                buffer.source.writerIndex(writerIndex + neededBytes);
+            } else {
+                ByteBuffer temp = ByteBuffer.allocate(neededBytes).order(buffer.source.order());
+                temp.asLongBuffer().put(array);
+                temp.rewind();
+                buffer.source.writeBytes(temp);
+            }
+        } else {
+            // not enough space even at max capacity, use traditional approach
+            // which will write each element individually (and handle growing the buffer as needed)
+            for (long l : array) {
+                buffer.writeLong(l);
+            }
+        }
+    }
+
+    // Canvas end - bulk writes to writeLongArray during chunk loading
     public long[] readLongArray() {
         return readLongArray(this);
     }
